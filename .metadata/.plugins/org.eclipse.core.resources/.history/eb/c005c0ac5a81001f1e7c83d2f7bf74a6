/*
 * Ex5.c
 *
 *  Created on: Oct 3, 2024
 *      Author: thuan
 */
#include "Ex5.h"

int led_buffer [4] = {1, 2, 3, 4};
void updateClockBuffer(int hour, int minute){
	led_buffer[0] = hour/10;
	led_buffer[1] = hour%10;
	led_buffer[2] = minute/10;
	led_buffer[3] = minute%10;
}



void update7SEG (int* index ){
	switch (*index){
		case 0:
			display7SEG(led_buffer[*index]);
			HAL_GPIO_WritePin(GPIOA, EN0_Pin, RESET);
			HAL_GPIO_WritePin(GPIOA, EN1_Pin|EN2_Pin|EN3_Pin, SET);
			*index = 1;
			break ;
		case 1:
			display7SEG(led_buffer[*index]);
			HAL_GPIO_WritePin(GPIOA, EN1_Pin, RESET);
			HAL_GPIO_WritePin(GPIOA, EN0_Pin|EN2_Pin|EN3_Pin, SET);
			*index = 2;
			break ;
		case 2:
			display7SEG(led_buffer[*index]);
			HAL_GPIO_WritePin(GPIOA, EN2_Pin, RESET);
			HAL_GPIO_WritePin(GPIOA, EN1_Pin|EN0_Pin|EN3_Pin, SET);
			*index = 3;
			break ;
		case 3:
			display7SEG(led_buffer[*index]);
			HAL_GPIO_WritePin(GPIOA, EN3_Pin, RESET);
			HAL_GPIO_WritePin(GPIOA, EN1_Pin|EN2_Pin|EN0_Pin, SET);

			*index = 0;
			break ;
		default :
			break ;
	}
}
