/*
 * Ex3.c
 *
 *  Created on: Oct 3, 2024
 *      Author: thuan
 */
#include "Ex3.h"

/*
int timer1_counter = 0;
int timer1_flag = 0;

void setTimer1(int duration){
	timer1_counter = duration;
	timer1_flag = 0;
}
void timerRun(){
	if(timer1_counter > 0){
		timer1_counter--;
		if(timer1_counter <= 0){
			timer1_flag = 1;
		}
	}
}
*/

const int MAX_LED = 4;
int index_led = 0;
int led_buffer [4] = {1, 2, 3, 4};
void update7SEG (int index ){
	switch ( index ){
		case 0:
			// Display the first 7 SEG with led_buffer [0]
			index_led = 1;
			HAL_GPIO_TogglePin(GPIOA , EN0_Pin | EN1_Pin);
			HAL_GPIO_WritePin(GPIOA, EN3_Pin, SET);
			display7SEG(led_buffer[index_led]);
			break ;
		case 1:
			// Display the second 7 SEG with led_buffer [1]
			index_led = 2;
			HAL_GPIO_TogglePin(GPIOA , EN1_Pin | EN2_Pin);
			HAL_GPIO_WritePin(GPIOA, EN0_Pin, SET);
			display7SEG(led_buffer[index_led]);
			break ;
		case 2:
			// Display the third 7 SEG with led_buffer [2]
			index_led = 3;
			HAL_GPIO_TogglePin(GPIOA , EN2_Pin | EN3_Pin);
			HAL_GPIO_WritePin(GPIOA, EN1_Pin, SET);
			display7SEG(led_buffer[index_led]);
			break ;
		case 3:
			// Display the forth 7 SEG with led_buffer [3]
			index_led = 0;
			HAL_GPIO_TogglePin(GPIOA , EN3_Pin | EN0_Pin);
			HAL_GPIO_WritePin(GPIOA, EN2_Pin, SET);
			display7SEG(led_buffer[index_led]);
			break ;
		default :
			break ;
	}
}
